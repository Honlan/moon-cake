<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% if user %}
    <title>我是{{user.name}}，我为{{cake.name}}代言</title>
    {% else %}
    <title>看看我属于哪种月饼</title>
    {% endif %}
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="Honlan" />
    <link href="{{url_for('static',filename='css/bootstrap.min.css')}}" rel="stylesheet" />
    <link rel="shortcut icon" href="{{url_for('static',filename='img/logo.jpg')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='css/animate.css')}}">
    <script src="{{url_for('static',filename='js/jquery.js')}}"></script>
    <script src="{{url_for('static',filename='js/jquery.lettering.js')}}"></script>
    <script src="{{url_for('static',filename='js/jquery.textillate.js')}}"></script>
    <style>
    body {
        margin: 0;
        padding: 0;
        font-family: Microsoft Yahei;
        background-color: #FFF7E5;
    }
    
    #main {
        padding: 30px;
        padding-bottom: 100px;
        text-align: center;
    }
    
    #add input {
        margin-bottom: 30px;
        margin-top: 10px;
        width: 60%;
        margin-left: 20%;
        margin-right: 20%;
        background-color: #FFF9ED;
    }
    
    @keyframes submit {
        100% {
            transform: scale(1.2);
        }
    }
    
    @-o-keyframes submit {
        100% {
            -o-transform: scale(1.2);
        }
    }
    
    @-ms-keyframes submit {
        100% {
            -ms-transform: scale(1.2);
        }
    }
    
    @-moz-keyframes submit {
        100% {
            -moz-transform: scale(1.2);
        }
    }
    
    @-webkit-keyframes submit {
        100% {
            -webkit-transform: scale(1.2);
        }
    }
    
    #add #submit {
        border: 1px solid #3B82DC;
        font-size: 16px;
        color: #3B82DC;
        border-radius: 5px;
        padding: 6px 15px;
        cursor: pointer;
        animation: submit .6s infinite alternate;
        -o-animation: submit .6s infinite alternate;
        -ms-animation: submit .6s infinite alternate;
        -moz-animation: submit .6s infinite alternate;
        -webkit-animation: submit .6s infinite alternate;
    }
    
    #footer {
        z-index: 999;
        position: fixed;
        bottom: 0;
        width: 100%;
        text-align: center;
        color: white;
        background-color: #333;
        padding: 10px;
        padding-top: 20px;
        font-size: 13px;
    }
    </style>
</head>

<body>
    <div id="main">
        <div id="content">
            {% if user %}
            <div id="me">
                <h4 style="color:#888;line-height:1.5;">我是<span style="color:#FF3C3C;margin-left:10px;font-size:25px;">{{user.name}}</span><br>我为<span style="color:#3C85FF;margin-left:10px;margin-right:10px;font-size:25px;">{{cake.name}}</span>代言</h4>
                <img src="{{url_for('static',filename='')}}{{cake.image}}" alt="" style="margin-top:10px;width:80%;margin-left:10%;margin-right:10%;border-radius:10px;box-shadow:5px 5px 10px rgba(20,20,20,0.3);margin-bottom:30px;">
                <p style="width:80%;margin-left:10%;margin-right:10%;color:#4B9C34;">{{cake.description}}</p>
            </div>
            {% else %}
            <div id="add">
                <h1><span style="color:#41BF42;font-size:25px;margin-right:10px;" id="word1">看看</span><span style="color:#F95353;font-size:30px;" id="word2">我属于</span><br><span style="color:#888;font-size:20px;margin-right:5px;" id="word3">哪种</span><span style="color:#D89422;font-size:35px;" id="word4">月饼</span></h1>
                <img src="{{url_for('static',filename='img/cake.png')}}" alt="" style='width:80%;margin-left:10%;margin-right:10%;margin-bottom:20px;'>
                <div class="form-group">
                    <input type="text" name="username" placeholder="请输入您的姓名～" class="form-control">
                    <p><span id="submit">查看</span></p>
                </div>
            </div>
            {% endif %}
        </div>
        <div id="share" style="position:relative;padding-top:10px;display:none;">
            <span style="position:absolute;top:34px;left:50%;margin-left:-80px;color:#B98A12;">晒一晒<br>我的身份</span>
            <img src="{{url_for('static',filename='img/share.png')}}" alt="" style="width:100px;box-shadow:3px 3px 5px rgba(20,20,20,0.6);position:relative;left:40px;border-radius:5px;">
        </div>
    </div>
    <div id="footer">
        <p>Copyright © 2015
            <a href="http://zhanghonglun.cn" target="_blank"><img src="{{url_for('static',filename='img/logo.jpg')}}" alt="" style="width:25px;border-radius:50%;position:relative;top:-2px;margin-left:5px;margin-right:5px;"></a> All Rights Reserved.</p>
    </div>
</body>
<script>
$(document).ready(function() {
    $('#word1').textillate({
        initialDelay: 0,
        in : {
            effect: 'bounceIn',
            delay: 60,
            shuffle: false,
            reverse: false,
            sync: false
        }
    });
    $('#word2').textillate({
        initialDelay: 500,
        in : {
            effect: 'bounceIn',
            delay: 60,
            shuffle: false,
            reverse: true,
            sync: false
        }
    });
    $('#word3').textillate({
        initialDelay: 1000,
        in : {
            effect: 'bounceIn',
            delay: 60,
            shuffle: false,
            reverse: false,
            sync: false
        }
    });
    $('#word4').textillate({
        initialDelay: 1500,
        in : {
            effect: 'bounceIn',
            delay: 60,
            shuffle: false,
            reverse: true,
            sync: false
        }
    });
    if ("{{user}}" != "None") {
        $('#share').fadeIn(1600);
    }
    $('#add #submit').click(function() {
        var username = $('#add input').val();
        if (username == '') {
            $('#add input').attr('placeholder', '您还没有输入姓名呐～');

        } else {
            $.ajax({
                url: '{{url_for("add")}}',
                type: 'POST',
                data: {
                    username: username
                },
                dataType: 'json',
                error: function() {},
                success: function(data) {
                    $('#add').hide();
                    var me = '<div id="me"><h4 style="color:#888;line-height:1.5;">我是<span style="color:#FF3C3C;margin-left:10px;font-size:25px;">' + data['name'] + '</span><br>我为<span style="color:#3C85FF;margin-left:10px;margin-right:10px;font-size:25px;">' + data['cake']['name'] + '</span>代言</h4><img src="' + "{{url_for('static',filename='')}}" + data['cake']['image'] + '" alt="" style="margin-top:10px;width:80%;margin-left:10%;margin-right:10%;border-radius:10px;box-shadow:5px 5px 10px rgba(20,20,20,0.3);margin-bottom:30px;"><p style="width:80%;margin-left:10%;margin-right:10%;color:#4B9C34;">' + data['cake']['description'] + '</p></div>';
                    $('#content').append(me);
                    $('#share').fadeIn(1600);
                }
            });
        }
    });
});
</script>

</html>